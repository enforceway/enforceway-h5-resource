h5plusDefine("h5plus.config",[],function(){"use strict";var e={env:"test",wxjssdkUrl:window.location.protocol+"//res.wx.qq.com/open/js/jweixin-1.0.0.js",paths:{h5sdk:"http://test.h5plus.net/frontend/js/h5sdk/1.01/h5sdk.js",netInfoPath:"http://h5plus.net/H5PlusISV/page_info.php",rmrAPIUrl:"http://canal.ruixuesoft.com:30000/log"},ifInject:function(t){return e.env=="test"&&t==e["account"+e.env]||e.env=="demo"&&t==e["account"+e.env]||e.env=="prod"&&t==e["account"+e.env]},ifUploadToServer:function(e){if(e=="share")return!0;if(e=="click")return!1;if(e=="view")return!1;if(e=="scroll")return!0}};return e}),h5plusDefine("h5plus.toolkit",["h5plus.config"],function(configObj){"use strict";var paths=configObj.paths,h5plusToolkit={},DOMContentLoaded,extend,ajax,hasOwn=Object.prototype.hasOwnProperty;h5plusToolkit.browser=window.navigator.userAgent;var domReadyWatcher=function(){function e(){this.ifReady=function(){return this.instantiated==1?!0:!1},this.instantiated=!1,this.ready=function(){var e=null;this.instantiated=!0;while(e=this.callbackQueue.shift())e()},this.callbackQueue=[],this.clear=function(){this.callbackFn=[]},this.push=function(e){e();return}}return new e}(),ifMobility,isWechat,toString=Object.prototype.toString,locationHref=window.location.href;return function(){extend=function(){var e,t,n,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!r(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((e=arguments[a])!=null)for(t in e){n=u[t],i=e[t];if(u===i)continue;l&&i&&(UTIL.isPlainObject(i)||(s=UTIL.isArray(i)))?(s?(s=!1,o=n&&UTIL.isArray(n)?n:[]):o=n&&UTIL.isPlainObject(n)?n:{},u[t]=extend(l,o,i)):i!==undefined&&(u[t]=i)}return u},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(this==null)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(i===0)return-1;var s=+t||0;Math.abs(s)===Infinity&&(s=0);if(s>=i)return-1;n=Math.max(s>=0?s:i-Math.abs(s),0);while(n<i){if(n in r&&r[n]===e)return n;n++}return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,n){var r,i;if(this==null)throw new TypeError("this is null or not defined");var s=Object(this),o=s.length>>>0;if(typeof t!="function")throw new TypeError(t+" is not a function");arguments.length>1&&(r=n),i=0;while(i<o){var u;i in s&&(u=s[i],t.call(r,u,i,s)),i++}});var e=function(e,t,n){var r;if(t){r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n].test(e))return!0}return!1};document.head||(document.head=document.getElementsByTagName("head")[0]),ifMobility=function(){var t=[/Opera Mobi/i,/MQQBro/i,/IPhone/i,/IPad/i,/Mobile Safari/i,/Windows Phone/i,/Opera Mini/i];t.concat["Android","SymbianOS","iPod"];var n=window.navigator.appVersion;return e(n,t)},isWechat=function(){var e=/MicroMessenger/i;return e.test(h5plusToolkit.browser)};var t=function(e){if(!e||toString.call(e)!=="[object Object]"||e.nodeType||e.setInterval)return!1;if(e.constructor&&!hasOwn.call(e,"constructor")&&!hasOwn.call(e.constructor.prototype,"isPrototypeOf"))return!1;var t;for(t in e);return t===undefined||hasOwn.call(e,t)},n=function(e){return Object.prototype.toString.call(e)==="[object Array]"},r=function(e){return typeof e=="function"},i=function(e){return Object.prototype.toString.call(e)==="[object Object]"},s=locationHref,o=function(e){if(e){var t={},n=e.split("&");for(var r=0;r<n.length;r++){if(!n[r])continue;var i=n[r].split("=");if(i.length!=2)continue;t[i[0]]=i[1]}return t}return{}};s=s.split("?"),s[1]?s=s[1]:s=null,s?s=o(s):s={},extend(h5plusToolkit,{urlParamObj:s,isPlainObject:t,isArray:n,isFunction:r,isObject:i,isWechat:isWechat,isMobile:ifMobility})}(),function(){var e,t;document.addEventListener?(e=function(e,t,n,r){r==undefined&&(r=!1),e.addEventListener(t,n,!1)},t=function(e,t,n){e.removeEventListener(t,n)},DOMContentLoaded=function(){if(domReadyWatcher.ifReady())return;domReadyWatcher.ready(),document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1)}):document.attachEvent&&(e=function(e,t,n,r){r==undefined&&(r=!1),/^on/.test(t)||(t+="on"),e.attachEvent(""+t,n,!1)},t=function(e,t,n){e.detachEvent("on"+t,n)},DOMContentLoaded=function(){if(domReadyWatcher.ifReady())return;document.readyState==="complete"&&(domReadyWatcher.ready(),document.detachEvent("onreadystatechange",DOMContentLoaded))});var n=Date.now?Date.now:function(){(new Date).getTime()},r=function(e){if(!e||e.length===0)return null;var t=[];return e.forEach(function(e,n){t.push(JSON.stringify(e))}),"["+t.join(",")+"]"};extend(h5plusToolkit,{removeEvent:t,bindEvent:e,now:n,arrayToJsonStr:r})}(),function(){var e=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:h5plusToolkit.now(),o=null,s=e.apply(r,i),o||(r=i=null)};return function(){var f=h5plusToolkit.now();!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0||l>t?(clearTimeout(o),o=null,u=f,s=e.apply(r,i),o||(r=i=null)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},t=function(e,t,n){var r,i,s,o,u,a=function(){var f=h5plusToolkit.now()-o;f<t&&f>0?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i),r||(s=i=null)))};return function(){s=this,i=arguments,o=h5plusToolkit.now();var f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i),s=i=null),u}};extend(h5plusToolkit,{throttle:e,debounce:t})}(),function(){var getReg=/^get$/i,postReg=/^post$/i,deleteReg=/^delete$/i,appJsonReg=/application\/json/i,wformReg=/x-www-form-urlencoded/i,objectToFlatQryStr=function(e){var t=[];for(var n in e)typeof e[n]=="object"?objectToFlatQryStr(e[n]):typeof e[n]!="function"&&t.push(n+"="+e[n]);return t.join("&")},ajaxCall=function(burl,paramStr,succFnResp,errorFnResp,requestParamObj){function doHttpRequest(){if(window.XMLHttpRequest)http_request=new XMLHttpRequest,http_request.overrideMimeType&&http_request.overrideMimeType("text/xml");else if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}if(!http_request)return alert("无法初始化http请求对象"),!1;http_request.onreadystatechange=handleStateChange,http_request.open(postOrGet,burl,ifAsync),http_request.setRequestHeader("Content-Type",contentType),postReg.test(postOrGet)?paramStr?http_request.send(paramStr):http_request.send(null):(getReg.test(postOrGet)||deleteReg.test(postOrGet))&&http_request.send(null),ifAsync&&timeout>0&&(timeoutTimer=setTimeout(function(){http_request.abort("timeout"),clearTimeout(timeoutTimer),errorFnRes({err_code:506,err_msg:"访问超时"})},timeout))}function handleStateChange(){if(http_request.readyState==4&&http_request.status==200){clearTimeout(timeoutTimer);var content;content=http_request.responseText;var json=null;try{json=eval("("+content+")")}catch(e){throw UTIL.debug_mode&&alert("链接: "+burl+", 返回的json格式不正确:"+e.message),new Error(e.message)}succFnResp(json)}else http_request.readyState==4&&(http_request.status>=400?errorFnResp():http_request.status>=500&&errorFnResp())}var ifCache=requestParamObj.cache,ifAsync=requestParamObj.async,postOrGet=requestParamObj.type,timeout=requestParamObj.timeout,contentType=requestParamObj.contentType,timeoutTimer=null,param="",isXML=!1,isCache=!1,http_request=!1;doHttpRequest()};ajax=function(e){var t="",n=e.data?e.data:{},r=e.url,i,s,o=e.method,u=e.contentType,a=e.type,f={dataType:"json",async:!0,cache:!1,contentType:"application/x-www-form-urlencoded;charset=utf-8",success:function(){},error:function(){}};extend(f,e),appJsonReg.test(f.contentType)?(f.contentType="application/json;charset=utf-8",t=JSON.stringify(n)):wformReg.test(f.contentType)&&(t=objectToFlatQryStr(n)),function(){i=f.success,s=f.error,delete f.url,delete f.data,delete f.error,delete f.success}(),getReg.test(f.type)&&t!==""&&(r.indexOf("?")===-1&&(r+="?"),r.lastIndexOf("?")===r.length-1?r+=t:r+="&"+t,t=""),ajaxCall(r,t,i,s,f)},extend(h5plusToolkit,{ajax:ajax})}(),function(){var e=paths.rmrAPIUrl,t={ropLogs:{},serverUrl:e,config:function(e){this.serverUrl=e},add:function(e,t,n){if(!e||!t)return alert("rmr传入参数错误."),!1;n||(n=(new Date).getTime()),this.ropLogs.logList||(this.ropLogs.logList=[]);var r={};return r.type=e,r.content=t,r.logTime=n,this.ropLogs.logList.push(r),!0},clear:function(){this.ropLogs.logList=[]},send:function(t,n){if(!this.serverUrl)return alert("请先进行config操作");var r=this.ropLogs.logList;ajax({type:"POST",url:e,contentType:"application/json",data:{logList:r},success:t,error:n})}},n=function(e,n,r,i){var s=t.add(e,n);s&&(t.send(r,i),t.clear())},r=function(e,t,r,i){r||(r=function(){}),i||(i=function(){}),n(e,t,r,i)};extend(h5plusToolkit,{ROP:{send:r}})}(),function(){function t(e){return Array.prototype.slice.call(e)}var e=null;document.querySelector?(e=function(){return document.querySelectorAll("meta")},e=function(e){if(e!="")return e="name='"+e+"'",document.querySelector("meta["+e+"]");e="name";var n=document.querySelectorAll("meta["+e+"]");n=t(n);var r={};for(var i=0,s=n.length,o;i<s;i++)o=n[i],r[o.name]=o.content;return r}):e=function(e){var t={},n=document.getElementsByTagName("meta");for(var r=0,i=n.length;r<i;r++){if(e!=""&&e==n[r]["name"])return etas[r];e==""&&n[r].name&&(t[n[r].name]=n[r].content)}return t},extend(h5plusToolkit,{queryMeta:function(t){return e(t.trim())}})}(),extend(h5plusToolkit,{extend:extend,ready:function(e){domReadyWatcher.push(e)}}),!function(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),t=function(t,n){var r=e,i=[],s;n=n||r.length;if(t)for(s=0;s<t;s++)i[s]=r[0|Math.random()*n];else{var o;i[8]=i[13]=i[18]=i[23]="-",i[14]="4";for(s=0;s<36;s++)i[s]||(o=0|Math.random()*16,i[s]=r[s==19?o&3|8:o])}return i.join("")},n=function(){var t=e,n=new Array(36),r=0,i;for(var s=0;s<36;s++)s==8||s==13||s==18||s==23?n[s]="-":s==14?n[s]="4":(r<=2&&(r=33554432+Math.random()*16777216|0),i=r&15,r>>=4,n[s]=t[s==19?i&3|8:i]);return n.join("")},r=function(){return"enforceway"};extend(h5plusToolkit,{fastUUID:n,uuid:t})}(),!function(){function evalize(expressionString){try{expressionString=eval("("+expressionString+")")}catch(e){expressionString=null}return expressionString}var ifValidArray=function(jsonArrStr){if(jsonArrStr==null||jsonArrStr==undefined)jsonArrStr="[]";if(h5plusToolkit.isArray(jsonArrStr))return jsonArrStr;try{return jsonArrStr=eval("("+jsonArrStr+")"),jsonArrStr}catch(e){return null}};extend(h5plusToolkit,{evalize:evalize,ifValidArray:ifValidArray})}(),document.addEventListener?(document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",DOMContentLoaded,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",DOMContentLoaded)),h5plusToolkit}),h5plusDefine("h5plus.dya.script",["require","exports","module"],function(e,t,n){"use strict";document.head||(document.head=document.getElementsByTagName("head")[0]);var r=function(e,t){var n=document.createElement("script"),i=!1;n.onload=n.onreadystatechange=function(){!i&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(i=!0,typeof t=="function"&&t())};if(r.loaded.ifLoaded(e))return;n.src=e,r.loaded.push(e),document.head.appendChild(n)};r.loaded=function(){function e(){this.ifLoaded=function(e){return this.loadedSrcQueue.indexOf(e)>-1?!0:!1},this.loadedSrcQueue=[],this.push=function(e){this.loadedSrcQueue.push(e)}}return new e}();var i=function(e,t){var n=e.length,i=function(){n--,t()};e.forEach(function(e,t){r(e,i)})};return{loadScript:r,multiLoadScript:i}}),h5plusDefine("h5plus.metainfo",["h5plus.toolkit"],function(e){"use strict";var t={piwik_Id:"h5plus-piwikid",platform:"h5plus-usertrack-platform",pid:"h5plus-wechat-pid",account:"h5plus-wechat-account",wxCode:"h5plus-has-wechatcode",site_name:"h5plus-site-name",project_name:"h5plus-project-name"},n=e.queryMeta(""),r={projectId:n[t.piwik_Id]?n[t.piwik_Id]:"",platformId:n[t.platform]?n[t.platform]:"",project_name:n[t.project_name]?n[t.project_name]:"",site_name:n[t.site_name]?n[t.site_name]:"",hasWechatCode:n[t.wxCode]?n[t.wxCode]:"",pid:n[t.pid]?n[t.pid]:"",account:n[t.account]?n[t.account]:""};return r}),h5plusDefine("h5plus.pandora",[],function(){"use strict";var e=["h5program","h5uuid","h5pjtid","platform","action_type","weixin_id","weixin_openid","weixin_country","weixin_province","weixin_city","weixin_nick_name","weixin_gender","weixin_header_img_url","page_title","page_url","original_page_url","site_name","project_name",,"create_time","orientation","ip","country","province","city","node_name","click_desc","attrs"],t=["h5program","h5uuid","h5pjtid","platform","action_type","weixin_id","weixin_openid","weixin_country","weixin_province","weixin_city","weixin_nick_name","weixin_gender","weixin_header_img_url","page_title","page_url","original_page_url","site_name","project_name","create_time","orientation","ip","country","province","city","resolution","browser_user_agent","online_duration","source_channel","from_openid"],n=["h5program","h5uuid","h5pjtid","platform","action_type","weixin_id","weixin_openid","weixin_country","weixin_province","weixin_city","weixin_nick_name","weixin_gender","weixin_header_img_url","page_title","page_url","original_page_url","site_name","project_name","create_time","orientation","ip","country","province","city","scroll_cnt","scroll_to_bottom"],r=["h5program","h5uuid","h5pjtid","platform","action_type","weixin_id","weixin_openid","weixin_country","weixin_province","weixin_city","weixin_nick_name","weixin_gender","weixin_header_img_url","page_title","page_url","original_page_url","site_name","project_name","create_time","orientation","ip","country","province","city","share_channel"],i={urlParam:{wxShareChannel:"from",fromOpenid:"h5plus_propagate_source_openid"},desc:"data-h5event-click-desc",platform:"data-h5event-platform",attr:"data-h5event-attributes",node:"data-h5event-nodeName",clickTypeCode:"8baa754f-3781-4188-b4fd-2de5996332ef",viewTypeCode:"0ba27e75-f58b-41d5-878a-0fdbabdc0b7d",scrollTypeCode:"cf055497-f1ee-44f1-ad73-d38c1ab050e5",shareTypeCode:"a0f3c2bc-4e34-4b30-b2a0-a3f8c5361ca3",clickAttrWrapper:e,viewAttrWrapper:t,scrollAttrWrapper:n,shareAttrWrapper:r,click:"h5_utclick_identifier",view:"h5_utview_identifier",scroll:"h5_utscroll_identifier",h5uuid:"h5_uuid_identifier",string:{separator_1st:",,",separator_2nd:"::"},limits:{cookie:1,localStorage:1},interval:1500};return i}),h5plusDefine("h5plus.storage",["h5plus.toolkit"],function(e){"use strict";var t,n,r,i,s,o,u,a,f;(function(){function i(e){return c.raw?e:encodeURIComponent(e)}function s(e){return c.raw?e:decodeURIComponent(e)}function o(e){return i(c.json?JSON.stringify(e):String(e))}function f(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),c.json?JSON.parse(e):e}catch(n){}}function l(e,t){var n=c.raw?e:f(e);return r(t)?t(n):n}var t=/\+/g,n=e.extend,r=e.isFunction,c=function(e,t,u){if(t!==undefined&&!r(t)){u=n({},c.defaults,u);if(typeof u.expires=="number"){var a=u.expires,f=u.expires=new Date;f.setTime(+f+a*864e5)}return document.cookie=[i(e),"=",o(t),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var h=e?undefined:{},p=document.cookie?document.cookie.split("; "):[];for(var d=0,v=p.length;d<v;d++){var m=p[d].split("="),g=s(m.shift()),y=m.join("=");if(e&&e===g){h=l(y,t);break}!e&&(y=l(y))!==undefined&&(h[g]=y)}return h};c.defaults={},a=function(e,t){return u(e)===undefined?!1:(u(e,"",n({},t,{expires:-1})),!u(e))},u=c})();var l=function(e,t,n){n||(n={expires:0}),u(pkey,t,n)};return window.localStorage?(o=function(e){localStorage.removeItem(e)},s=function(e,t){localStorage.setItem(e,t)},i=function(e){return localStorage.getItem(e)}):(o=function(e){u(e,"pending dumped cookie",{expires:-1})},s=function(e,t){u(e,t,{expires:3650})},i=function(e){return u(e)}),window.sessionStorage?(r=function(e){sessionStorage.removeItem(e)},n=function(e,t){sessionStorage.setItem(e,t)},t=function(e){return sessionStorage.getItem(e)}):(r=function(e,t){u(e,t,{expires:-1})},n=function(e,t){u(e,t,{expires:0})},t=function(e){return u(e)}),{removeSession:r,getSession:t,setSession:n,removeStorage:o,getStorage:i,setStorage:s}}),h5plusDefine("h5plus.aggregate",["h5plus.metainfo","h5plus.pandora","h5plus.storage","h5plus.toolkit"],function(e,t,n,r){"use strict";var i,s=n.getSession(t.h5uuid),o=document.title,u=r.urlParamObj,a=window.location.href;s?i=s:(i=r.fastUUID(),n.setSession(t.h5uuid,i));var f={singlemessage:"friend",timeline:"timeline"},l=f[u[t.urlParam.wxShareChannel]],c={h5program:e.platformId,h5uuid:i,h5pjtid:e.projectId,wxOpenid:"",wxCountry:"",wxProvince:"",wxCity:"",wxGender:"",wxAvatar:"",wxNickname:"",account:e.account,pageTitle:o,pageUrl:a,fromOpenid:u[t.urlParam.fromOpenid]?u[t.urlParam.fromOpenid]:"",sourceChannel:l?l:"",site_name:e.site_name,project_name:e.project_name,original_page_url:a.split("?")[0]};return c}),h5plusDefine("h5plus.rmr.util",["h5plus.storage","h5plus.pandora","h5plus.toolkit"],function(e,t,n){"use strict";var r,i,s,o={getStorage:function(n){return e.getStorage(t[n])},setStorage:function(r,i){e.setStorage(i.action_type,i);var s=e.getStorage(t[r]);(s=n.ifValidArray(s))&&s.push(i),e.setStorage(t[r],u.wrap(s))}},u=function(){function e(){this.pattern="",this.wrap=function(e){var t=[];return e.forEach(function(e,n){t.push(JSON.stringify(e))}),"["+t.join(",")+"]"}}return new e}();return s=function(r,i){!i||i.length==0?e.removeStorage(t[r]):e.setStorage(t[r],n.arrayToJsonStr(i))},i=function(r){var i=e.getStorage(t[r]);return i=n.evalize(i),i?i:[]},{reset:s,getItem:i}}),h5plusDefine("ut.item.wrapper",["h5plus.aggregate","h5plus.pandora","h5plus.toolkit","h5plus.rmr.util","h5plus.storage","h5plus.config"],function(e,t,n,r,i,s){"use strict";var o=n.isMobile()?"mobile":"pc",u="",a,f=t;(function(){if(window.orientation==undefined||window.orientation==null)return;a=function(){var e={"m-90":"landscape",m90:"landscape",m0:"portrait"};return e["m"+window.orientation]},u=a(),n.bindEvent(window,"orientationchange",function(){u=a()},!1)})();var l=function(e){var t=f.string.separator_1st,n=f.string.separator_2nd,r=[],i=f[e.action_type+"AttrWrapper"];return i.forEach(function(t,i){r.push(t+n+e[t])}),r.join(t)},c=function(e){if(!e.action_type)return;e=d(e);var t=f[e.action_type+"TypeCode"];s.ifUploadToServer(e.action_type)?n.ROP.send(t,l(e),function(e){}):h(e)},h=function(e){var r=e.action_type,s=i.getStorage(t[r]);s=n.evalize(s),(s=n.ifValidArray(s))&&s.push(e),i.setStorage(t[r],p.wrap(s))},p=function(){function e(){this.pattern="",this.wrap=function(e){var t=[];return e.forEach(function(e,n){t.push(JSON.stringify(e))}),"["+t.join(",")+"]"}}return new e}(),d=function(t){var r=n.now();return n.extend(t,{h5program:e.h5program,h5uuid:e.h5uuid,h5pjtid:e.h5pjtid,weixin_id:e.account,weixin_openid:e.wxOpenid,weixin_country:e.wxCountry,weixin_province:e.wxProvince,weixin_city:e.wxCity,weixin_nick_name:e.wxNickname,weixin_gender:e.wxGender,weixin_header_img_url:e.wxAvatar,page_title:e.pageTitle,page_url:e.pageUrl,ip:e.ip,country:e.country,province:e.province,city:e.city,site_name:e.site_name,project_name:e.project_name,orientation:u,platform:o,create_time:r,original_page_url:e.original_page_url}),t};return{appendItem:c,wrapItem:d,logStrGenerator:l}}),h5plusDefine("ut.event.binder",["h5plus.toolkit","ut.item.wrapper","h5plus.pandora","h5plus.rmr.util","h5plus.aggregate"],function(e,t,n,r,i){"use strict";function c(){function o(){var n,o,u;r=setInterval(function(){o=f("view"),u=e.now(),n=o.pop(),n||(n=t.wrapItem({action_type:"view",resolution:a.width+"*"+a.height,browser_user_agent:e.browser,start_time:e.now(),online_duration:0,source_channel:i.sourceChannel,from_openid:i.fromOpenid})),n.online_duration=u-n.start_time,o.push(n),l("view",o)},s)}var r=null,s=n.interval;o()}function d(){var n=[],r,i=e.debounce(function(){var e=document.documentElement.scrollTop||document.body.scrollTop,i=n.length;t.appendItem({action_type:"scroll",scroll_cnt:i,scroll_to_bottom:e+h>=p}),r=null,n=[]},1e3,!1);h=document.documentElement.clientHeight,p=Math.max(document.documentElement.offsetHeight,document.body?document.body.offsetHeight:0),e.bindEvent(window,"scroll",function(){r||(r=document.documentElement.scrollTop||document.body.scrollTop),n.push({counter:"scroll_counter"}),i()}),e.isMobile()||e.bindEvent(window,"resize",function(){h=document.documentElement.clientHeight||document.body.clientHeight,p=document.documentElement.offsetHeight||document.body.offsetHeight})}function v(){var r=e.isMobile()?"touchstart":"click",i,s,u,a=function(e){var r=e.srcElement||e.target;t.appendItem({action_type:"click",node_name:r.getAttribute(n.node),click_desc:r.getAttribute(n.desc),attrs:r.getAttribute(n.attr)}),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),u&&u(e)},f=function(){o.forEach(function(t,o){i=t.nodetype,s=t.ifform==="non-form"?!1:!0,u=t.ondefault;var f=document.querySelectorAll(i);f=Array.prototype.slice.call(f,0),f.forEach(function(t,i){if(!t.hasAttribute(n.node)){if(t.attributes&&t.attributes.length){var o=[];for(var u=0,f=t.attributes.length;u<f;u++)o.push("{attrname:'"+t.attributes[u].name+"',attrvalue:'"+t.attributes[u].value+"'}");t.setAttribute(n.attr,o.join(","))}t.setAttribute(n.node,t.nodeName),t.setAttribute(n.desc,s?t.value:t.innerText)}e.bindEvent(t,r,a)})})};f();var l=e.debounce(function(){f()},1e3,!1);e.bindEvent(document,"DOMNodeInserted",function(){l()})}var s=function(e){window.event&&(window.event.returnValue=!0)},o=[{nodetype:"button",ifform:"non-form"},{nodetype:"input",ifform:"form"},{nodetype:"a",ifform:"non-form",ondefault:s}],u={input:["value"],a:[{title:[/$\s/g]},{href:[/$\s/g]}]},a={height:window.screen.height,width:window.screen.width},f=r.getItem,l=r.reset,h=0,p=0;return{runScroll:d,runView:c,runClick:v}}),h5plusDefine("ut.logUploader",["h5plus.rmr.util","h5plus.pandora","h5plus.toolkit","ut.item.wrapper"],function(e,t,n,r){"use strict";function u(){!function(){var e=i("click");s("click",[]);if(!e.length)return;var t=o.clickTypeCode;e.forEach(function(e){n.ROP.send(t,r.logStrGenerator(e),function(e){})})}(),!function(){var e=i("view");s("view",[]);if(!e.length)return;var t=o.viewTypeCode;e.forEach(function(e){n.ROP.send(t,r.logStrGenerator(e),function(e){})})}()}var i=e.getItem,s=e.reset,o=t;return{run:u}}),h5plusDefine("wx.info.inject",["h5plus.aggregate","h5plus.metainfo","h5plus.config","h5plus.dya.script","h5plus.toolkit","h5plus.pandora","ut.item.wrapper"],function(e,t,n,r,i,s,o){"use strict";function a(){window.h5sdk.wxOpenidReady(function(){function f(){h5sdk.callAPIByName(t.pid,"ruixue.external.weixin.userdetailinfo.get",a,function(n){n=n.external_weixin_userdetailinfo_get_response;var r={g1:"male",g2:"female"};if(n&&n.wxuserinfo){var a=r["g"+n.wxuserinfo.sex],f=[],l=i.urlParamObj;e.wxOpenid=h5sdk.wxOpenid(),e.wxCountry=n.wxuserinfo.country,e.wxProvince=n.wxuserinfo.province,e.wxCity=n.wxuserinfo.city,e.wxGender=a?a:"null",e.wxAvatar=n.wxuserinfo.head_image_url,e.wxNickname=n.wxuserinfo.nick_name;for(var c in l){if(c==s.urlParam.fromOpenid){f.push(c+"="+e.wxOpenid);continue}f.push(c+"="+l[c])}var h=f.join("&");e.newPageUrl=u+"?"+h}var p=document.querySelectorAll("img"),d="";p.length>1&&(d=p[1].src),h5sdk.wxInit(t.pid,t.account,function(){h5sdk.wxShareToFriend(e.pageTitle,e.newPageUrl,d,"",function(){o.appendItem({action_type:"share",share_channel:"friend"})}),h5sdk.wxShareToTimeline(e.pageTitle,e.newPageUrl,d,function(){o.appendItem({action_type:"share",share_channel:"timeline"})})})})}var r=h5sdk.wxOpenid(),a={open_id:r,weixin_account:t.account,component_appid:n.componentAppId};setTimeout(f,0)})}var u=e.pageUrl;return u=u.split("?")[0],{run:function(){a()}}}),h5plusDefine("h5plus.judge",["h5plus.toolkit","h5plus.dya.script","wx.info.inject","h5plus.config","h5plus.metainfo"],function(e,t,n,r,i){"use strict";function o(){if(!e.isWechat())return;window.h5sdk?n.run():t.loadScript(s.h5sdk,function(){n.run()})}var s=r.paths;i.hasWechatCode=="n"&&r.ifInject(i.account)?o():i.hasWechatCode=="y"}),h5plusRequire(["h5plus.toolkit","h5plus.dya.script","h5plus.config","h5plus.aggregate","ut.event.binder","ut.logUploader","h5plus.judge"],function(e,t,n,r,i,s){"use strict";var o=n.paths;t.loadScript(o.netInfoPath,function(){var e=window.h5NetInfo;r.ip=e.ip,r.country=e.country,r.province=e.province,r.city=e.city}),s.run(),i.runScroll(),i.runClick(),i.runView(),window.h5event=e}),h5plusDefine("../h5event/1.0/ut.run",function(){});