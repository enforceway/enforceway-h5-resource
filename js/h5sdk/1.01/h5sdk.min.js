!function(a){var c={host:window.location.protocol+"//h5plus.net",wxjssdk_url:window.location.protocol+"//res.wx.qq.com/open/js/jweixin-1.0.0.js",component_appid:"wx2aeb95ce677f8e7e",hierarchy_2rd:"::",sktest_code:"54ead964-f706-44cb-8d94-433dc5689c88"};a.h5_Config=c}(window,document),function(global,doc){var sessionStorageAttrNames,h5_sdk,locationQueryStr,locationHref,clipParamURL,extend,urlJSON,UTIL,ROP_UT,invalidURLRedirect,ifValidOpenid,SERVICE,OpenIDReadyWatcher,responseHub,exceptionCodeArr,ifWXConfigured,getWXConfigured,Config=global.h5_Config;delete global.h5_Config,sessionStorageAttrNames={openid:"h5sdk_openid",accessToken:"h5plusAccess-Token",refreshToken:"Refresh-Token",expireTime:"Expires-In",state:"Token-State"},h5_sdk={},locationQueryStr=window.location.href.split("?")[1]?window.location.href.split("?")[1]:"",locationHref=window.location.href,clipParamURL=function(a){return a=a.replace(/#[^&]*/g,""),a=a.replace(/([\?&])((openid=[^&]*)|(account=[^&]*)|(sign=[^&]*)|(nick=[^&]*)|(h5auth_code=[^&]*)|(timestamp=[^&]*))/g,"$1").replace(/&+/,"&").replace("?&","?").replace(/&$/,"").replace(/\?$/,"")},function(){var a=function(a){var c,d,e,b={};if(a){for(c=a.split("&"),d=0;d<c.length;d++)e=c[d].split("="),b[e[0]]=e[1];return b}return{}};urlJSON=a(),extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[1]||{},h=2),"object"==typeof g||UTIL.isFunction(g)||(g={}),i===h&&(g=this,--h);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(UTIL.isPlainObject(d)||(e=UTIL.isArray(d)))?(e?(e=!1,f=c&&UTIL.isArray(c)?c:[]):f=c&&UTIL.isPlainObject(c)?c:{},g[b]=extend(j,f,d)):void 0!==d&&(g[b]=d));return g}}(),UTIL={},function(){var AjaxCall,getReg=/^get$/i,postReg=/^post$/i,deleteReg=/^delete$/i,contentTypeJSON=/application\/json/i,contentTypeWWForm=/x-www-form-urlencoded/i;UTIL.isFunction=function(a){return"function"==typeof a},UTIL.isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},UTIL.isPlainObject=function(a){if(!a||"[object Object]"!==toString.call(a)||a.nodeType||a.setInterval)return!1;if(a.constructor&&!hasOwnProperty.call(a,"constructor")&&!hasOwnProperty.call(a.constructor.prototype,"isPrototypeOf"))return!1;var b;for(b in a);return void 0===b||hasOwnProperty.call(a,b)},UTIL.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},UTIL.inRegArray=function(a,b,c){var d;if(b)for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c].test(a))return!0;return!1},UTIL.tokenTimer=null,UTIL.alertDebugger=function(){var a,b,c,d,e;if(UTIL.debug_mode){for(a=[],b=arguments,a=a.slice.call(b,0),c=0,d=a.length,e=[];d>c;c++)"string"==typeof a[c]&&e.push(a[c]);alert(e.join("\n"))}},UTIL.objectToFlatQryStr=function(a){var c,b=[];for(c in a)"object"==typeof a[c]?UTIL.objectToFlatQryStr(a[c]):"function"==typeof a[c]||b.push(c+"="+a[c]);return b.join("&")},UTIL.loadScript=function(a,b){var c=document.createElement("script"),d=!1;c.onload=c.onreadystatechange=function(){d||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(d=!0,"function"==typeof b&&b())},c.src=a,document.head.appendChild(c)},UTIL.getOpenid=function(){return sessionStorage.getItem(sessionStorageAttrNames.openid)},UTIL.mangoRespObjWrap=function(a){return a},UTIL.jsApiList=["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],UTIL.debug_mode=!1,UTIL.hfive=/^(ruixue\.hfive)/,UTIL.external=/^(ruixue\.external)/,UTIL.htools=/^(ruixue\.tools)/,UTIL.ropRespObjFromCertainHierarchy=function(a,b){return b},UTIL.getStorage=function(a){return sessionStorage.getItem(sessionStorageAttrNames[a])},UTIL.setStorage=function(a,b){sessionStorage.setItem(sessionStorageAttrNames[a],b)},AjaxCall=function(burl,paramStr,succFnResp,errorFnResp,requestParamObj){function doHttpRequest(){if(window.XMLHttpRequest)http_request=new XMLHttpRequest,http_request.overrideMimeType&&http_request.overrideMimeType("text/xml");else if(window.ActiveXObject)try{http_request=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{http_request=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}return http_request?(http_request.onreadystatechange=handleStateChange,http_request.open(postOrGet,burl,ifAsync),http_request.setRequestHeader("Content-Type",contentType),postReg.test(postOrGet)?paramStr?http_request.send(paramStr):http_request.send(null):(getReg.test(postOrGet)||deleteReg.test(postOrGet))&&http_request.send(null),ifAsync&&timeout>0&&(timeoutTimer=setTimeout(function(){http_request.abort("timeout"),clearTimeout(timeoutTimer),errorFnRes({err_code:506,err_msg:"访问超时"})},timeout)),efdef.promise(http_request)):(alert("无法初始化http请求对象"),!1)}function handleStateChange(){if(4==http_request.readyState&&200==http_request.status){clearTimeout(timeoutTimer);var content;content=http_request.responseText;try{"json"===dataType&&(content=eval("("+content+")"))}catch(e){throw UTIL.debug_mode&&alert("链接: "+burl+", 返回的json格式不正确:"+e.message),new Error(e.message)}succFnResp(content),efdef.resolve()}else 4==http_request.readyState&&(efdef.reject(),http_request.status>=400?errorFnResp():http_request.status>=500&&errorFnResp())}var efdef=h5_sdk.Deferred(),ifCache=requestParamObj.cache,ifAsync=requestParamObj.async,postOrGet=requestParamObj.type,timeout=requestParamObj.timeout,dataType=requestParamObj.dataType,contentType=requestParamObj.contentType,timeoutTimer=null,param="",isXML=!1,isCache=!1,http_request=!1;return doHttpRequest()},UTIL.ajax=function(a){var e,f,j,k,b="",c=a.data?a.data:{},d=a.url;return a.method,a.contentType,a.type,j=UTIL.getStorage("accessToken"),a.data&&(j?a.data.h5_access_token=j:""),k={type:"POST",url:Config.host+"/auth-template/api/",dataType:"json",async:!0,cache:!1,contentType:"application/x-www-form-urlencoded;charset=utf-8",success:function(){},error:function(){}},extend(k,a),b=contentTypeJSON.test(k.contentType)?JSON.stringify(c):UTIL.objectToFlatQryStr(c),function(){e=k.success,f=k.error,delete k.method,delete k.url,delete k.data,delete k.error,delete k.success}(),getReg.test(k.type)&&""!==b&&(-1===d.indexOf("?")&&(d+="?"),d+=d.lastIndexOf("?")===d.length-1?b:"&"+b,b=""),AjaxCall(d,b,e,f,k)},extend(h5_sdk,{ajax:UTIL.ajax})}(),function(){var a=Object.prototype.toString,b={},c=function(c){return null==c?String(c):b[a.call(c)]||"object"};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(a){b["[object "+a+"]"]=a.toLowerCase()}),UTIL.type=c}(),function(){function b(b){var d,e,c=a[b]={};for(b=b.split(/\s+/),d=0,e=b.length;e>d;d++)c[b[d]]=!0;return c}var a={},c=function(c){c=c?a[c]||b(c):{};var f,g,h,i,j,k,d=[],e=[],l=function(a){var b,e,f,g;for(b=0,e=a.length;e>b;b++)f=a[b],g=UTIL.type(f),"array"===g?l(f):"function"===g&&(c.unique&&n.has(f)||d.push(f))},m=function(a,b){for(b=b||[],f=!c.memory||[a,b],g=!0,h=!0,k=i||0,i=0,j=d.length;d&&j>k;k++)if(d[k].apply(a,b)===!1&&c.stopOnFalse){f=!0;break}h=!1,d&&(c.once?f===!0?n.disable():d=[]:e&&e.length&&(f=e.shift(),n.fireWith(f[0],f[1])))},n={add:function(){if(d){var a=d.length;l(arguments),h?j=d.length:f&&f!==!0&&(i=a,m(f[0],f[1]))}return this},remove:function(){var a,b,e,f;if(d)for(a=arguments,b=0,e=a.length;e>b;b++)for(f=0;f<d.length&&(a[b]!==d[f]||(h&&j>=f&&(j--,k>=f&&k--),d.splice(f--,1),!c.unique));f++);return this},has:function(a){if(d)for(var b=0,c=d.length;c>b;b++)if(a===d[b])return!0;return!1},empty:function(){return d=[],this},disable:function(){return d=e=f=void 0,this},disabled:function(){return!d},lock:function(){return e=void 0,f&&f!==!0||n.disable(),this},locked:function(){return!e},fireWith:function(a,b){return e&&(h?c.once||e.push([a,b]):c.once&&f||m(a,b)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!g}};return n},d=[].slice;extend(h5_sdk,{Deferred:function(a){var j,b=c("once memory"),d=c("once memory"),e=c("memory"),f="pending",g={resolve:b,reject:d,notify:e},h={done:b.add,fail:d.add,progress:e.add,state:function(){return f},isResolved:b.fired,isRejected:d.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({});for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;return i.done(function(){f="resolved"},d.disable,e.lock).fail(function(){f="rejected"},b.disable,e.lock),a&&a.call(i,i),i},when:function(a){function k(a){return function(c){b[a]=arguments.length>1?d.call(arguments,0):c,--g||i.resolveWith(i,b)}}function l(a){return function(b){f[a]=arguments.length>1?d.call(arguments,0):b,i.notifyWith(j,f)}}var b=d.call(arguments,0),c=0,e=b.length,f=new Array(e),g=e,i=1>=e&&a&&jQuery.isFunction(a.promise)?a:jQuery.Deferred(),j=i.promise();if(e>1){for(;e>c;c++)b[c]&&b[c].promise&&jQuery.isFunction(b[c].promise)?b[c].promise().then(k(c),i.reject,l(c)):--g;g||i.resolveWith(i,b)}else i!==a&&i.resolveWith(i,e?[a]:[]);return j}})}(),ROP_UT={},function(){var a=UTIL.ajax,b={string:{separator_1st:",,",separator_2nd:"::"}},c="http://canal.ruixuesoft.com:30000/log",d={ropLogs:{},serverUrl:c,config:function(a){this.serverUrl=a},add:function(a,b,c){if(!a||!b)return alert("logType and logContent are required."),!1;c||(c=(new Date).getTime()),this.ropLogs["logList"]||(this.ropLogs["logList"]=[]);var d={};return d.type=a,d.content=b,d.logTime=c,this.ropLogs["logList"].push(d),!0},clear:function(){this.ropLogs["logList"]=[]},send:function(b,d){if(!this.serverUrl)return alert("请先进行config操作");var e=this.ropLogs["logList"];a({type:"POST",url:c,contentType:"application/json",data:{logList:e},success:b,error:d})}},e=Object.prototype.toString,f=function(a,b,c,e){var f=d.add(a,b);f&&(d.send(c,e),d.clear())},g=function(a,c,d,g){var i,j,k,h=[];if("[object Array]"===e.call(c))for(i=0,j=c.length;j>i;i++)for(k in c[i])h.push(k+b.string.separator_2nd+c[i][k]);else{if("[object Object]"!==e.call(c))return;for(k in c)h.push(k+b.string.separator_2nd+c[k])}!d&&(d=function(){}),!g&&(g=function(){}),f(a,h.join(b.string.separator_1st),d,g)};h5_sdk.rmrSend=ROP_UT.send=g}(),function(){ifValidOpenid=function(a,b,c,d,e,f){var g=UTIL.getStorage("state");UTIL.setStorage("state",null),UTIL.ajax({type:"POST",async:!1,url:Config.host+"/auth-template/login/weixin?pid="+a,data:{openid:c,h5auth_code:d,timestamp:e,sign:f,state:g},success:function(c){var d=clipParamURL(locationHref);c.success===!0?(UTIL.setStorage("accessToken",c.data.access_token),UTIL.setStorage("refreshToken",c.data.refresh_token),UTIL.setStorage("expireTime",c.data.expires_in),UTIL.setStorage("openid",c.data.open_id),window.location.href=d):invalidURLRedirect(a,b)},error:function(){alert("网络有点忙乱.亲, 待会尝试吧.")}})},invalidURLRedirect=function(a,b,c){var d=1==c||0==c?c:0,e=encodeURIComponent(clipParamURL(locationHref));UTIL.ajax({type:"POST",async:!1,url:Config.host+"/auth-template/login/weixin?pid="+a,data:{module_url:e,component_appid:Config.component_appid,weixin_id:b,remark:"获取正确的openid",Scope:d},success:function(a){if(a.success===!0)UTIL.setStorage("state",a.data.state),window.location.href=a.data.redirect_url;else{var b=window.confirm("微信浏览器加载用户信息过程中超时, 请确认是否刷新页面重试");b&&(window.location.href=clipParamURL(locationHref))}},error:function(){alert("网络有点忙乱.亲, 待会尝试吧!")}})}}(),SERVICE={refreshToken:function(){UTIL.ajax({type:"GET",url:Config.host+"/auth-template/token/refresh/"+UTIL.getStorage("accessToken")+"/"+UTIL.getStorage("refreshToken")+"/"+UTIL.getStorage("expireTime"),success:function(a){var b,c,d;a.success===!0?(UTIL.setStorage("accessToken",a.data.access_token),UTIL.setStorage("refreshToken",a.data.refresh_token),UTIL.setStorage("expireTime",a.data.expires_in),b=1e3*parseInt(a.data.expires_in),UTIL.tokenTimer=setTimeout(function(){SERVICE.refreshToken()},b)):(c=window.confirm("用户认证过期, 页面将刷新重新认证. 请确认"),c&&(d=clipParamURL(locationHref),window.location.href=d))},error:function(){alert("网络有点忙碌.请待会尝试.")}})},ifValidAccessOpenidURL:function(){var a=urlJSON;return a.openid&&a.h5auth_code&&a.timestamp&&a.sign?!0:!1},pageParamValid:function(){return UTIL.getOpenid()?!0:(alert("openid没有写入sessionStorage"),!1)},getPublicID:function(a,b,c,d,e){var f="ruixue.hfive.weixin.pubid.get";b=encodeURIComponent(b),UTIL.ajax({type:"POST",url:Config.host+"/auth-template/api/?pid="+a+"&method="+f,data:{request_url:b,wx_id:c},success:function(a){var b=UTIL.ropRespObjFromCertainHierarchy(f,a);1==b.result_success?d(b.wxinfos.wxinfo[0]):e({err_code:"S25",err_msg:"未查询到结果"})},error:function(a){e(a["error_response"])}})},wxconfig:function(a,b,c,d,e){ifWXConfigured=!0,wx.config({debug:e,appId:a,timestamp:b,nonceStr:c,signature:d,jsApiList:UTIL.jsApiList})}},OpenIDReadyWatcher=function(){function a(){this.instantiated=!1,this.ready=function(){var a=null;for(this.instantiated=!0;a=this.callbackQueue.shift();)a()},this.callbackQueue=[],this.clear=function(){this.callbackFn=[]},this.push=function(a){UTIL.isFunction(a)&&(this.instantiated===!0?a():this.callbackQueue.push(a))}}return new a}(),h5_sdk.pageURLParamToJson=function(){return UTIL.clone(urlJSON)},h5_sdk.wxOpenid=function(){return UTIL.getOpenid()},h5_sdk.getUrlParam=function(a){return h5_sdk.getUrlParams()[a]},h5_sdk.wxOpenidInit=function(a,b,c){var f,e=UTIL.getStorage("openid");e?(SERVICE.refreshToken(),OpenIDReadyWatcher.ready()):SERVICE.ifValidAccessOpenidURL()?(f=urlJSON,ifValidOpenid(a,b,urlJSON.openid,f.h5auth_code,f.timestamp,f.sign)):invalidURLRedirect(a,b,c)},responseHub={ropExceptionFlag:/^S/i,ropApiTransfer:function(a,b,c){a.error_response&&this.ropExceptionFlag.test(a.error_response.code)?c(a):b(a)},mongoTransfer:function(a,b,c){a.error_response&&this.ropExceptionFlag.test(a.error_response.code)?c(a):a.error_response?b(a):"0"==a.code?b(a):c(a)},validate:function(a,b,c,d,e,f){return a&&"string"==typeof a?b&&"string"==typeof b?c&&"string"==typeof c?d&&"object"==typeof d?"function"!=typeof e?(alert("请求成功回调函数必须是js函数"),!1):"function"!=typeof f?(alert("请求失败回调函数必须是js函数"),!1):!0:(alert("数据查询参数必须是js对象"),!1):(alert("表名称没有传入"),!1):(alert("数据库名称没有传入"),!1):(alert("公众号pid没有传入"),!1)}},h5_sdk.searchDataByPaging=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.findpaging",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.searchDataById=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.findone",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.searchDataWithCount=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.findcount",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.insertData=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.insert",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.batchInsertData=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.bulkinsert",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.saveDataById=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.update",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.updateDataById=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.dataupdate",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},h5_sdk.deleteDataById=function(a,b,c,d,e,f){var g,h;responseHub.validate(a,b,c,d,e,f)&&(g="ruixue.tools.mts.api.delete",h={},d.database_name=b,d.dbtable_name=c,extend(h,{type:"POST",contentType:"application/json;charset=utf-8",url:Config.host+"/auth-template/api/?pid="+a+"&method="+g,data:d,success:function(a){responseHub.mongoTransfer(a,e,f)},error:function(){f({})}}),UTIL.ajax(h))},exceptionCodeArr=[/^S/],h5_sdk.callAPIByName=function(a,b,c,d,e,f){var g={};extend(g,f),d||(d=function(){}),e||(e=function(){}),extend(g,{url:Config.host+"/auth-template/api/?pid="+a+"&method="+b,data:c,success:function(a){responseHub.ropApiTransfer(a,d,e)},error:function(){e({})}}),UTIL.ajax(g)},ifWXConfigured=!1,getWXConfigured=function(a,b,c,d){var e=function(a){var d,f,g,h;return a.pub_id,d=a.app_id,a.component_appid,f=a.timestamp,g=a.noncestr,h=a.signature,d&&f&&g&&h?(SERVICE.wxconfig(d,f,g,h,UTIL.debug_mode),c||(c=function(){}),wx.ready(c),void 0):(alert("公众号唯一标识、签名的时间戳、签名随机串和签名缺失"),void 0)};h5_sdk.getPubid(a,b,e,d)},h5_sdk.wxInit=function(a,b,c){window.wx?getWXConfigured(a,b,c):UTIL.loadScript(Config.wxjssdk_url,function(){getWXConfigured(a,b,c)})},h5_sdk.wxIfFollowing=function(a,b,c,d,e){var f="ruixue.external.weixin.userdetailinfo.get",g={weixin_account:b,open_id:c,component_appid:Config.component_appid};d||(d=function(){}),h5_sdk.callAPIByName(a,f,g,function(a){a.wxuserinfo&&"1"===a.wxuserinfo.subscribe?d({result_success:!0,result_msg:"true"}):a.wxuserinfo&&"0"===a.wxuserinfo.subscribe?d({result_success:!0,result_msg:"false"}):a.error_response&&d(a)},e)},h5_sdk.wxShareToFriend=function(a,b,c){var d,e,f,g,h,i,j;d=c.title,e=c.desc,g=c.imgSrc,i=c.success,j=c.error,f=locationHref,UTIL.isFunction(i)||(i=function(){}),UTIL.isFunction(j)||(j=function(){}),wx.onMenuShareAppMessage({title:d,desc:e,link:f,imgUrl:g,success:function(){i(),h5_sdk.trackShare(a,b,activityId,e,h,"friend")},fail:function(a){j(a)}})},h5_sdk.wxShareToTimeline=function(a,b,c){var d,e,f,g,h,i;d=c.title,e=locationHref,f=c.imgSrc,g=c.success,h=c.error,UTIL.isFunction(g)||(g=function(){}),UTIL.isFunction(h)||(h=function(){}),wx.onMenuShareTimeline({title:d,link:e,imgUrl:f,success:function(){g(),h5_sdk.trackShare(a,b,activityId,null,i,"community")},fail:function(a){h(a)}})},h5_sdk.wxOpenidReady=function(a){OpenIDReadyWatcher.push(a)},h5_sdk.wxUploadImage=function(a,b,c,d,e){var f,g;e=e||{},f=function(a,b){return UTIL.ropRespObjFromCertainHierarchy(a,b)},g=function(){var g="ruixue.hfive.weixin.api.media.uploadtocosbymediaid";wx.chooseImage({success:function(h){var i=h.localIds[0];e.src=i,wx.uploadImage({localId:i,isShowProgressTips:1,success:function(e){var h=e.serverId;UTIL.ajax({type:"GET",url:Config.host+"/auth-template/api/?method="+g,dataType:"json",cache:!1,async:!1,data:{weixin_id:b,media_id:h,pid:a},success:function(a){c(f(g,a))},error:function(a){d({code:a.code,msg:a.msg})}})},fail:function(){d(errorObj)}})},fail:function(a){d(a)}})},ifWXConfigured===!0&&g()},h5_sdk.trackShare=function(a,b,c,d,e,f){var j,g=locationHref,h=[];e||(e=null),("friend"===f||"community"===f)&&(h.push("weixin_id"+Config.hierarchy_2rd+b),h.push("ToUserName"+Config.hierarchy_2rd+f),h.push("CreateTime"+Config.hierarchy_2rd+(new Date).getTime()),h.push("url"+Config.hierarchy_2rd+encodeURIComponent(g)),h.push("detail"+Config.hierarchy_2rd+d),h.push("FromUserName"+Config.hierarchy_2rd+e),h.push("activity_id"+Config.hierarchy_2rd+c),j="37da273e-c11e-4d35-b831-ab663bde3477",ROP_UT.send(j,h.join(",,"),function(){},function(){}))},global.h5sdk=h5_sdk}(window,document);